<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Commande Pass IDF | Idf Tourisme</title>

  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/commande.css">
  <link rel="icon" type="image/png" href="../images/logo.png" />
  <!-- <script type="text/javascript" src="assets/js/main.js" defer></script> -->
  <script type="text/javascript" src="../js/commande.js" defer></script>
</head>

<body>

  <header>
    <div class="conteneur">
      <nav class="nav_menu">
        <h1 class="logos">
          <img src="../images/log.png" alt="logo">
        </h1>
        <ul>
          <li><a href="index.html">Accueil</a></li>
          <li><a href="about.html">A propos</a></li>
          <li><a href="activites.html">Activités</a></li>
          <li><a href="commande.html" class="active">Commande</a></li>
          <li><a href="idfpass.html">Idf pass</a></li>
        </ul>
      </nav>
    </div>

    <div class="banner commande-banner">
      <div class="conteneur">
        <h3 class="banner-title">Commande</h3>
        <p class="banner-description">Petite description à ajouter de max 2 lignes pas plus</p>
        <ol class="breadcrumb">
          <li class="breadcrumb-child"><a href="index.html">Accueil</a></li>
          <li class="breadcrumb-child"><a href="#">Commandes</a></li>
        </ol>
        <img class="img-globe" src="../images/globe.png" alt="">
      </div>
    </div>
  </header>

  <section>
    <div class="conteneur">

      <div class="section-title">
        <p>Une phrase ici? (tres petit)</p>
        <h1>Commander votre Pass IDF !</h1>
      </div>

      <div class="content-aside">

        <div class="content">

          <div class="firts-content">
            <div class="form-steps-content">
              <ul class="form-steps">
                <li class="active">Commande</li>
                <li>Informations personnelles</li>
                <li>Paiement</li>
              </ul>
            </div>

            <div class="form-command">
              <form class="js-form-command js-command" action="#" method="post">
                <div id="commande">

                  <h2>Commande</h2>
                  <div class="content-input">
                    <label for="typepass">Type de pass: </label>
                    <select class="input" id="typepass" name="typepass" required>
                      <option value="PassIDF n°1">PassIDF n°1</option>
                      <option value="PassIDF n°2">PassIDF n°2</option>
                      <option value="PassIDF n°3">PassIDF n°12</option>
                    </select>
                  </div>

                  <div class="content-input">
                    <label for="nbadultes">Adultes: </label>
                    <select class="input" id="nbadultes" name="nbadultes" required>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                      <option value="7">7</option>
                      <option value="8">8</option>
                      <option value="9">9</option>
                      <option value="10">10</option>
                    </select>
                  </div>

                  <div class="content-input">
                    <label for="nbenfants">Enfants: </label>
                    <select class="input" id="nbenfants" name="nbenfants" required>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                      <option value="7">7</option>
                      <option value="8">8</option>
                      <option value="9">9</option>
                      <option value="10">10</option>
                    </select>
                  </div>
    
                  <div class="content-input">
                    <label for="date"> Date : </label>
                    <input class="input" type="date" id="date" name="date" required>
                  </div>

                  <span class="error">
                    <p id="ajout_error"> </p>
                  </span>
    
                  <div class="content-buttons">
                    <button type="reset">Supprimer</button>
                    <button type="submit">suivant</button>
                  </div>
                </div>
              </form>
            </div>
          </div>

        <aside class="aside">
          <h4 class="aside-title">Récapitultif</h4>
          <div class="">
            <ul class="recapitulatif"></ul>
            <div class="total-amount">total: <span></span></div>
          </div>
        </aside>
      </div>

      <!-- <input type="checkbox" id="facture" name="facture">
      <label for="facture"> <strong>Je certifie </strong> avoir pris connaissance des conditions générales de vente du
        Pass IDF </label>
      <br>
      <span class="error">
        <p id="facture_error"> </p>
      </span>

      <button type="submit" class="submit" onclick="valider()"> Confirmer </button> <br> <br> -->
    </div>
  </section>


  <footer>
    <ul>
      <li>© 2021 <a href="#">Efrei</a></li>
      <li><a href="#">Mentions legales</a> | <a href="#">Politique de confidentialite</a></li>
    </ul>
  </footer>

  <script>
    var newCommandForm = document.forms.newCommand;

    var ajout = 0

    function ajouter() {

      if (document.newCommand.date.checkValidity()) {
        const newArticleTr = document.createElement('tr')
        const typePassTd = document.createElement('td')
        const prixtotalPassTd = document.createElement('td')
        const newAdultesTr = document.createElement('tr')
        const typeadulteTd = document.createElement('td')
        const nbadulteTd = document.createElement('td')
        const newEnfantsTr = document.createElement('tr')
        const typeenfantTd = document.createElement('td')
        const nbenfantTd = document.createElement('td')
        typePassTd.textContent = document.newCommand.typepass.value
        prixtotalPassTd.textContent = "prix total à dét"
        typeadulteTd.textContent = "Adultes"
        nbadulteTd.textContent = document.newCommand.nbAdultes.value
        typeenfantTd.textContent = "Enfants"
        nbenfantTd.textContent = document.newCommand.nbEnfants.value

        newArticleTr.append(typePassTd, prixtotalPassTd)
        newAdultesTr.append(typeadulteTd, nbadulteTd)
        newEnfantsTr.append(typeenfantTd, nbenfantTd)

        /* le premier élément dans le document qui contient la classe "datatable" est retourné*/
        const table = document.querySelector('.datatable tbody')

        table.appendChild(newArticleTr, newAdultesTr, newEnfantsTr)
        ajout++;
      }
      //const selectEntree = document.getElementById("entreeId");
      //const valeurselectionnee = selectEntree.options[selectEntree.selectedIndex].value;
      //const textselectionne = selectEntree.options[selectEntree.selectedIndex].text;

    }

    // supprimer toutes les lignes du tableau
    function supprimer() {
      const tbody = document.querySelector('.datatable tbody')
      while (tbody.firstChild) {
        tbody.removeChild(tbody.firstChild)
      }

    }


    function valider() {

      var error = 0;

      // vérifier qu'au moins un article est commandé
      if (ajout == 0) {
        document.getElementById("ajout_error").innerHTML = "Veuillez ajouter au moins un article à la commande.";
        error++;
      } else {
        document.getElementById("ajout_error").innerHTML = "";
      }

      //vérifier que tous les champs du formulaire sont remplis
      var v_nom = document.getElementById("nom").value;
      if (v_nom == "") {
        document.getElementById("nom_error").innerHTML = "Ce champs est obligatoire.";
        error++;
      } else {
        document.getElementById("nom_error").innerHTML = "";
      }

      var v_prenom = document.getElementById("prenom").value;
      if (v_prenom == "") {
        document.getElementById("prenom_error").innerHTML = "Ce champs est obligatoire.";
        error++;
      } else {
        document.getElementById("prenom_error").innerHTML = "";
      }

      var v_adresse = document.getElementById("adresse").value;
      if (v_adresse == "") {
        document.getElementById("adresse_error").innerHTML = "Ce champs est obligatoire.";
        error++;
      } else {
        document.getElementById("adresse_error").innerHTML = "";
      }

      var v_tel = document.getElementById("tel").value;
      if (v_tel == null || v_tel == "") {
        document.getElementById("tel_error").innerHTML = "Ce champs est obligatoire.";
        error++;
      } else {
        document.getElementById("tel_error").innerHTML = "";
      }

      var v_email = document.getElementById("email").value;
      if (v_email == null || v_email == "") {
        document.getElementById("email_error").innerHTML = "Ce champs est obligatoire.";
        error++;
      } else {
        document.getElementById("email_error").innerHTML = "";
      }

      var v_conf_email = document.getElementById("conf_email").value;
      if (v_conf_email == null || v_conf_email == "") {
        document.getElementById("conf_email_error").innerHTML = "Ce champs est obligatoire.";
        error++;
      } else {
        // vérification de la confirmation
        if (v_email != v_conf_email) {
          document.getElementById("conf_email_error").innerHTML = "Les mails saisis ne sont pas identiques.";
          error++;
        } else {
          document.getElementById("conf_email_error").innerHTML = ""
        };
      }

      var v_mdp = document.getElementById("mdp").value;
      if (v_mdp == null || v_mdp == "") {
        document.getElementById("mdp_error").innerHTML = "Ce champs est obligatoire.";
        error++;
      } else {
        document.getElementById("mdp_error").innerHTML = "";
      }

      var v_conf_mdp = document.getElementById("conf_mdp").value;
      if (v_conf_mdp == null || v_conf_mdp == "") {
        document.getElementById("conf_mdp_error").innerHTML = "Ce champs est obligatoire.";
        error++;
      } else {
        // vérification de la confirmation
        if (v_mdp != v_conf_mdp) {
          document.getElementById("conf_mdp_error").innerHTML = "Les mots de passe saisis ne sont pas identiques.";
          error++;
        } else {
          document.getElementById("conf_mdp_error").innerHTML = ""
        };
      }

      /*var variable = [nom, prenom, adresse, tel, email, conf_email, mdp, conf_mdp];
      variable.forEach( function(v){
        var val = document.form.v.value;
        if (val == null || val== "") {
          document.getElementById(v.toString()+'_error').innerHTML = "This field must be filled out";
        };
      });*/


      // vérifier que la case sur les conditions de vente est remplie
      if (document.getElementById("facture").checked == false) {
        document.getElementById("facture_error").innerHTML = "Ce champs est obligatoire.";
        error++;
      } else {
        document.getElementById("facture_error").innerHTML = ""
      };

      // penser à ajouter une condition sur la date : date > date d'aujourd'hui

      // si toutes les conditions sont remplies passer à la page suivante
      // console.log(error);
      if (error == 0) {
        window.location.href = "paiement.html";
      }
    }
  </script>
</body>
</html>